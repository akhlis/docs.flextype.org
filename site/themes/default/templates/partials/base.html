<!doctype html>
<html lang="{{ locale }}">
    {% set entry_locale = entries.fetch(locale) %}
    <head>
        {% block head %}
            <meta charset="{{ registry.settings.charset|lower }}">
            <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
            <meta name="description" content="{% if entry.description %}{{ entry.description }}{% else %}{{ registry.settings.description }}{% endif %}">
            <meta name="keywords" content="{% if entry.keywords %}{{ entry.keywords }}{% else %}{{ registry.settings.keywords }}{% endif %}">
            <meta name="robots" content="{% if entry.robots %}{{ entry.robots }}{% else %}{{ registry.settings.robots }}{% endif %}">
            <meta name="generator" content="Powered by Flextype {{ FLEXTYPE_VERSION }}" />

            <meta name="image" content="https://github.com/flextype/flextype/raw/dev/site/plugins/admin/preview.png">

            <meta name="twitter:card" content="summary_large_image">
            <meta name="twitter:site" content="{{ base_url() }}/{{ entry.slug }}">
            <meta name="twitter:title" content="{{ entry.title }}">
            <meta name="twitter:description" content="{{ entry.description }}">
            <meta name="twitter:image" content="https://github.com/flextype/flextype/raw/dev/site/plugins/admin/preview.png">

            <meta property="og:url" content="{{ base_url() }}/{{ entry.slug }}">
            <meta property="og:title" content="{{ entry.title }}">
            <meta property="og:description" content="{{ entry.description }}">
            <meta property="og:type" content="website">
            <meta property="og:image" content="https://github.com/flextype/flextype/raw/dev/site/plugins/admin/preview.png">
            <meta property="og:image:type" content="image/png">

            <!-- Yandex.Metrika counter -->
            <script type="text/javascript" >
               (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
               m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
               (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

               ym(56663935, "init", {
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true
               });
            </script>
            <noscript><div><img src="https://mc.yandex.ru/watch/56663935" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
            <!-- /Yandex.Metrika counter -->
            
            <link rel="canonical" href="{{ base_url() }}/{{ entry.slug }}">

            {% do emitter.emit('onThemeMeta') %}

            <title>{% if entry.title %}{{ entry.title|e('html') }} | {% endif %}{{ registry.settings.title|e('html') }}</title>

            <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&amp;subset=cyrillic,cyrillic-ext,latin-ext" rel="stylesheet">
            <script src="https://kit.fontawesome.com/588226d8c5.js"></script>

            {% set highlight_css = base_url() ~ '/site/themes/' ~ registry.settings.theme ~ '/assets/highlight/styles/tomorrow-night-bright.css' %}
            {% set docs_css = base_url() ~ '/site/themes/' ~ registry.settings.theme ~ '/assets/dist/css/docs.min.css' %}
            {% do assets.add('css', highlight_css, 'site', 1) %}
            {% do assets.add('css', docs_css, 'site', 2) %}
            {% for assets_site in assets.get('css', 'site') %}
                {% for assets_by_priorities in assets_site %}
                    <link href="{{ assets_by_priorities.asset }}" rel="stylesheet">
                {% endfor %}
            {% endfor %}

            {% do emitter.emit('onThemeHeader') %}
        {% endblock %}
    </head>
    <body>

        <div class="flex">
            <div class="sidebar width-3-12">
                <div class="flextype">
                    <h2 class="h2">FLEXTYPE</h2>
                    <h3 class="h3">DOCUMENTATION</h3>
                </div>
                <h4>{{ entry_locale.txt.categories.basics.title }}</h4>
                <ul>
                    <li class="{% if entry.slug == locale %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}">{{ entry_locale.txt.categories.basics.what_is_flextype }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/basics/requirements" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/basics/requirements">{{ entry_locale.txt.categories.basics.requirements }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/basics/installation" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/basics/installation">{{ entry_locale.txt.categories.basics.installation }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/basics/configuration" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/basics/configuration">{{ entry_locale.txt.categories.basics.configuration }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/basics/folder-structure" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/basics/folder-structure">{{ entry_locale.txt.categories.basics.folder_structure }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/basics/php-constants" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/basics/php-constants">{{ entry_locale.txt.categories.basics.php_constants }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/basics/coc" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/basics/coc">{{ entry_locale.txt.categories.basics.coc }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/basics/getting-help" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/basics/getting-help">{{ entry_locale.txt.categories.basics.getting_help }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/basics/license" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/basics/license">{{ entry_locale.txt.categories.basics.license }}</a></li>
                </ul>
                <h4>{{ entry_locale.txt.categories.content.title }}</h4>
                <ul>
                    <li class="{% if entry.slug == locale ~ "/content/entries" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/content/entries">{{ entry_locale.txt.categories.content.entries }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/content/media" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/content/media">{{ entry_locale.txt.categories.content.media }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/fieldsets/fieldsets" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/fieldsets/fieldsets">{{ entry_locale.txt.categories.content.fieldsets }}</a></li>
                </ul>
                <h4>{{ entry_locale.txt.categories.themes.title }}</h4>
                <ul>
                    <li class="{% if entry.slug == locale ~ "/themes/installation" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/themes/installation">{{ entry_locale.txt.categories.themes.theme_installation }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/themes/theme-configuration" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/themes/theme-configuration">{{ entry_locale.txt.categories.themes.theme_configuration }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/themes/theme-variables" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/themes/theme-variables">{{ entry_locale.txt.categories.themes.theme_variables }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/themes/twig-filters-functions" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/themes/twig-filters-functions">{{ entry_locale.txt.categories.themes.twig_filters_functions }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/themes/entries-fetch" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/themes/entries-fetch">{{ entry_locale.txt.categories.themes.entries_fetch }}</a></li>
                </ul>
                <h4>{{ entry_locale.txt.categories.plugins.title }}</h4>
                <ul>
                    <li class="{% if entry.slug == locale ~ "/plugins/installation" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/plugins/installation">{{ entry_locale.txt.categories.plugins.installation }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/plugins/configuration" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/plugins/configuration">{{ entry_locale.txt.categories.plugins.configuration }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/plugins/hooks" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/plugins/hooks">{{ entry_locale.txt.categories.plugins.event_hooks }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/plugins/toasts" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/plugins/toasts">{{ entry_locale.t.txt.categories.plugins.toasts_notifications }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/plugins/navigation" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/plugins/navigation">{{ entry_locale.txt.categories.plugins.navigation }}</a></li>
                </ul>
                <h4>{{ entry_locale.txt.categories.advanced.title }}</h4>
                <ul>
                    <li class="{% if entry.slug == locale ~ "/advanced/performance-and-caching" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/advanced/performance-and-caching">{{ entry_locale.txt.categories.advanced.performance_and_caching }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/advanced/yaml-syntax" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/advanced/yaml-syntax">{{ entry_locale.txt.categories.advanced.yaml_syntax }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/advanced/password-recovery" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/advanced/password-recovery">{{ entry_locale.txt.categories.advanced.password_recovery }}</a></li>
                    <li class="{% if entry.slug == locale ~ "/advanced/api" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/advanced/api">{{ entry_locale.txt.categories.advanced.api }}</a></li>
                </ul>
                <h4>{{ entry_locale.txt.categories.cookbook.title }}</h4>
                <ul>
                    <li class="{% if entry.slug == locale ~ "/cookbook/blog" %}active{% endif %}"><a href="{{ base_url() }}/{{ locale }}/cookbook/blog">{{ entry_locale.txt.categories.cookbook.blog }}</a></li>
                </ul>
            </div>
            <div class="content width-9-12">
                {% block content %}{% endblock %}
                <div class="edit-this-page flex">
                    <div class="width-3-12 text-left">
                        {{ entry_locale.txt.common.language }}:
                        <a href="{{ base_url() }}/en">en</a>,
                        <a href="{{ base_url() }}/ru">ru</a>
                    </div>
                    <div class="width-9-12">
                        {% if locale == 'en' %}
                            <a href="https://github.com/flextype/docs.flextype.org/tree/dev/site/entries/{{ entry.slug }}/entry.md">{{ entry_locale.txt.common.edit_this_page }}</a>
                        {% else %}
                            <a href="https://crowdin.com/project/flextype-documentation/{{ locale }}">{{ entry_locale.txt_link_edit_this_page }}</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>


        {% set highlight_js = base_url() ~ '/site/themes/' ~ registry.settings.theme ~ '/assets/highlight/highlight.pack.js' %}
        <script src="{{ highlight_js }}"></script>

        <script>
        hljs.configure({useBR: false});
        document.querySelectorAll('pre code').forEach((block) => {
            hljs.highlightBlock(block);
        });
        </script>
        {% do emitter.emit('onThemeTail') %}
    </body>
</html>
